<configuration>
  <timestamp key="byMinute" datePattern="yyyy'-'MM'-'dd'--'HH':'mm"/>

  <!-- File appenders-->
  <appender name="commands-file" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${cubeengine.log}/${byMinute}/commands.log</file>
    <encoder>
      <pattern>%date{yyyy-MM-dd HH:mm:ss} - %msg%n</pattern>
    </encoder>

    <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
      <fileNamePattern>${cubeengine.log}/${byMinute}/commands.%1.log</fileNamePattern>
      <minIndex>1</minIndex>
      <maxIndex>${cubeengine.log.max-file-count}</maxIndex>
    </rollingPolicy>
    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
      <maxFileSize>${cubeengine.log.max-size}</maxFileSize>
    </triggeringPolicy>
  </appender>

  <appender name="permissions-file" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${cubeengine.log}/${byMinute}/permissions.log</file>
    <encoder>
      <pattern>%date{yyyy-MM-dd HH:mm:ss} - %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
      <fileNamePattern>${cubeengine.log}/${byMinute}/permissions.%1.log</fileNamePattern>
      <minIndex>1</minIndex>
      <maxIndex>${cubeengine.log.max-file-count}</maxIndex>
    </rollingPolicy>
    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
      <maxFileSize>${cubeengine.log.max-size}</maxFileSize>
    </triggeringPolicy>
  </appender>

  <appender name="language-file" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${cubeengine.log}/${byMinute}/missing-translations.log</file>
    <encoder>
      <pattern>%date{yyyy-MM-dd HH:mm:ss} [%level] %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
      <fileNamePattern>${cubeengine.log}/${byMinute}/missing-translations.%1.log</fileNamePattern>
      <minIndex>1</minIndex>
      <maxIndex>${cubeengine.log.max-file-count}</maxIndex>
    </rollingPolicy>
    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
      <maxFileSize>${cubeengine.log.max-size}</maxFileSize>
    </triggeringPolicy>
  </appender>

  <appender name="webapi-file" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${cubeengine.log}/${byMinute}/webapi.log</file>
    <encoder>
      <pattern>%date{yyyy-MM-dd HH:mm:ss} [%level] %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
      <fileNamePattern>${cubeengine.log}/${byMinute}/webapi.%1.log</fileNamePattern>
      <minIndex>1</minIndex>
      <maxIndex>${cubeengine.log.max-file-count}</maxIndex>
    </rollingPolicy>
    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
      <maxFileSize>${cubeengine.log.max-size}</maxFileSize>
    </triggeringPolicy>
  </appender>

  <appender name="core-file" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${cubeengine.log}/${byMinute}/core.log</file>
    <encoder>
      <pattern>%date{yyyy-MM-dd HH:mm:ss} [%level] %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
      <fileNamePattern>${cubeengine.log}/${byMinute}/core.%1.log</fileNamePattern>
      <minIndex>1</minIndex>
      <maxIndex>${cubeengine.log.max-file-count}</maxIndex>
    </rollingPolicy>
    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
      <maxFileSize>${cubeengine.log.max-size}</maxFileSize>
    </triggeringPolicy>
  </appender>

  <!-- Console appenders -->
  <appender name="cubeengine-console" class="de.cubeisland.cubeengine.core.logger.BukkitAppender">
    <layout>
      <!-- We only want to print the message, as Bukkit and our BukkitAppender handles prefix with level and the newline -->
      <pattern>%msg</pattern>
    </layout>
  </appender>

  <!-- Loggers -->
  <!-- Loggers that only should log to files -->
  <logger name="cubeengine.commands" level="debug" additivity="false">
    <appender-ref ref="commands-file" />
  </logger>

  <logger name="cubeengine.permissions" level="debug" additivity="false">
    <appender-ref ref="permissions-file" />
  </logger>

  <logger name="cubeengine.language" level="debug" additivity="false">
    <appender-ref ref="language-file" />
  </logger>

  <logger name="cubeengine.webapi" level="debug" additivity="false">
    <appender-ref ref="webapi-file" />
  </logger>

  <!-- The logger for the core-->
  <logger name="cubeengine.core" additivity="true">
    <appender-ref ref="core-file" />
  </logger>

  <!-- The parent logger for all loggers related to CubeEngine-->
  <logger name="cubeengine" level="all" additivity="false">
    <appender-ref ref="cubeengine-console" />
  </logger>

  <root level="all"/>
</configuration>